<html>
  <head>
  </head>
  <body>
    <div id="messages">
    </div>
    <input type="text" value="" id="chat-message"/>
    <button type="submit" id="submit-button">Send</button>
    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect("http://localhost:8080");

      socket.on("connect", function(data){
        console.log("connected to server");
        socket.emit("join", 123, 'abc-123');
      });

      socket.on("action", function(data){
        console.log(data);
        console.log(JSON.parse(data));
        $('#messages').append('<div class="message">'+data.toString()+'</div>');
      });

      socket.on("end", function(){
        console.log("reloading");
        window.location.href = window.location.href;
      });

      $('#submit-button').on('click', function(e){
        var message = $('#chat-message').val();
        action = {"scope": "te\r\nst", "action": "reverse", "args": message }
        socket.emit("action", action);
      });

    </script>
  </body>
</html>
